## 1. はじめに
+ 本書を読むにあたって事前に下記設計書を参照しておくこと

  [01_Webシステム_基本設計書.md](https://github.com/chibiharu/Public-Documents/blob/master/02_Web%E3%82%B5%E3%82%A4%E3%83%88_%E8%A8%AD%E8%A8%88%E6%9B%B8/01_Web%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0_%E5%9F%BA%E6%9C%AC%E8%A8%AD%E8%A8%88%E6%9B%B8.md)

## 2.  監視設計
### 2.1. 基本方針
chibiharu HPを常に高いパフォーマンスを維持しながら運営していくことを目的に、24時間365日の監視体制を敷くものとする。
また、運用コストの観点から監視製品に関しては、基本的に無償で使用できるものを採用する。

### 2.2. 監視方針
+ 基盤システム障害の早期検知を目的として、各サービス、サーバ、及びハードウェアの稼働状況を確認、監視を行う
+ 本書にて監視業務における基準書とし、監視設計の標準化を図る
+ 定常監視業務はは監視要件に従って実施する

### 2.3. 監視サービス
#### 選定要件
+ 基本的に、無償で利用できること
+ 簡易な導入、及び運用を可能なこと
+ 高いセキュリティ性を有していること

#### 監視製品一覧
No.|サービス名|用途|備考
--|--|--|--
1|Amazon CloudWatch|AWSサービスの基本メトリクスの監視・アラート発砲|-
2|Aamazon CloudWatch Logs|AWSサービスの監視ログの取得、及び管理|・chibiharu HPに関連するログは全てCloudWatch Logsにて収集、及び管理する。
3|Mackerel|インフラリソースの監視メトリック監視を行う。
4|Google Analytics|アクセス解析|・カスタマイズせず、デフォルトのまま使用する。<br>・必要に応じてレポートを作成し、作業フォルダに保管する。
5|Google Search Console|SEO管理/解析|・ページエラーについては、アラート項目を設定する。

## 3 サービス毎の設計
### 3.1 AWS CloudWatch
#### 基本方針
+	Webサービスだけではなく、AWSのネイティブサービスや自宅にて運用しているオンプレ機器の監視も行う
+	運用コストの観点からカスタムメトリクスは基本的には使用しない方針とする
+	システムにクリティカルに影響すると予測されるメトリクスに関しては、CloudWatch アラームと連携し、基準値を超える場合は、アラート通知を行う

#### 監視対象
+ chibinet
+ chibiharu’s Lab
+ AWS サービス（ログが取得可能なサービス）
+ 自宅NW機器
+ 自宅サーバ機器

### 3.2 AWS CloudWatch Logs
#### 基本方針
+	当システムの監視ログの収集を行う。
+ 一定の期間を経過したログは、AWS Lambdaを利用し、Amazon S3にて管理する。

#### ログ取得対象
+	chibiharu HPで発生した全ての監視ログ

### 3.3 Mackerel
#### 基本方針
+	インフラリソースのメトリクス監視にはMackerelを使用する。
+ ログ監視は基本的には行わない。
+	Webサービスだけではなく、AWSのネイティブサービスや自宅にて運用しているオンプレ機器の監視も行う
+	運用コストの観点からFreeプランで利用できる範囲とする

#### 監視対象
+ chibinet
+ chibiharu’s Lab
+ AWS サービス（ログが取得可能なサービス）
+ 自宅NW機器
+ 自宅サーバ機器

### 3.4 Google Analytics
#### 基本方針
+ 各HPのアクセスビューの監視をはAnalyticsを使用して行う
+	設計時点ではレポート等のカスタマイズは行わない。運用上必要になった際に適時レポートを作成する
+ アラート項目は設けない

#### 監視対象
+ chibinet
+ chibiharu’s Lab

### 3.5 Google Search Console
#### 基本方針
+ 各HPのSEO監視はSearch Consoleを使用して行う
+	設計時点ではレポート等のカスタマイズは行わない。運用上必要になった際にレポートを作成する
+	下記項目でエラーが発生した際は、管理者へメールにてアラート通知を行う
  +	カバレッジ
  +	ユーザエクスペリエンス
  + モバイルユーザビリティ

#### 監視対象
+ chibinet
+ chibiharu’s Lab
